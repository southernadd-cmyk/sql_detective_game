<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detective Conan SQL: Case Files</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Neue:wght@400;700&family=Fredoka+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=Roboto+Slab:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Landing Page -->
    <div id="landing-page" class="landing-page">
        <div class="landing-content">
            <!-- Detective Conan Logo -->
            <div class="landing-logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 301.99994 91.827463" class="detective-conan-logo">
                    <defs>
                        <linearGradient id="linearGradient7020" spreadMethod="pad" gradientTransform="matrix(23.3924,0,0,-20.6709,761.9253,521.0742)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0">
                            <stop offset="0" style="stop-opacity:1;stop-color:#fdb810" />
                            <stop offset="1" style="stop-opacity:1;stop-color:#ed2228" />
                        </linearGradient>
                        <linearGradient id="linearGradient7002" spreadMethod="pad" gradientTransform="matrix(23.8076,0,0,-20.329,761.5082,539.5621)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0">
                            <stop offset="0" style="stop-opacity:1;stop-color:#fdb810" />
                            <stop offset="1" style="stop-opacity:1;stop-color:#ed2228" />
                        </linearGradient>
                        <linearGradient id="linearGradient6984" spreadMethod="pad" gradientTransform="matrix(22.9113,0,0,-19.0404,762.0691,556.4311)" gradientUnits="userSpaceOnUse" y2="0" x2="1" y1="0" x1="0">
                            <stop offset="0" style="stop-opacity:1;stop-color:#febc16" />
                            <stop offset="1" style="stop-opacity:1;stop-color:#ed2228" />
                        </linearGradient>
                    </defs>
                    <g transform="translate(-179.67127,-606.20822)">
                        <path d="m 480.51439,623.6535 -29.37898,-0.0215 c 0,0 -6.76587,-10.71926 -21.24591,-10.71926 -14.47869,0 -22.82861,12.74647 -23.48594,17.15918 l 0.0323,-6.38604 -25.72193,0 0,-10.52126 -29.85984,0 0,10.60882 -23.71493,0 0,19.98245 c -1.448,-5.62364 -7.83135,-19.46925 -23.90351,-19.7858 l -47.31132,0 0,30.13733 41.83719,0 0,12.80305 -40.53332,0 -15.02556,30.03631 c 0,0 54.42204,0.0889 59.83555,0.0889 9.16081,0 14.13116,-3.36881 16.52744,-5.97925 l -2.63064,5.89035 41.94495,0.0714 c 7.12013,-0.0714 22.69795,-7.77476 22.69795,-24.27123 0,-16.49511 0,-18.63951 0,-18.63951 l 25.84047,0 0,-6.98005 c 4.06788,12.49728 14.66591,16.68774 20.95631,17.1942 12.04874,0.96444 19.08266,-5.01076 23.56675,-10.72331 l -0.18588,12.87982 -40.12652,0 -14.32514,30.13868 60.10224,0.31655 c 13.12093,-0.0122 23.90755,-10.70446 24.10825,-24.42614 0.35291,-23.79306 0,-48.85362 0,-48.85362 z m -129.93103,42.73967 -19.7575,0 -3.33242,6.26615 0,-18.58697 23.08992,0 0,12.32082 z" style="fill:#f69321;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:0.5530985;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"/>
                        <path d="m 259.6474,628.13894 0,21.61364 42.13623,0 0,21.39408 -41.89647,0 -10.95094,21.83051 55.23022,0 c 8.79578,-0.25863 19.04225,-9.0773 19.04225,-19.88681 l 0,-24.63627 c -0.27883,-8.59238 -5.45796,-20.05788 -20.94823,-20.31515 l -42.61306,0" style="fill:#ed2328;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 331.06562,628.13894 0,21.39678 23.80788,0 0,20.96304 -21.42776,0 -10.95095,22.26154 c 0,0 27.61309,-0.21686 33.09125,-0.21686 14.969,0 20.70848,-12.77341 20.70848,-20.31516 0,-8.86177 0,-22.26018 0,-22.26018 l 25.7098,0 0,-21.82916 -25.47543,0 0,-11.02099 -21.65539,0 0,11.23786 -23.80788,-0.21687" style="fill:#ed2328;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 413.42941,670.71428 -10.71118,21.61229 c 0,0 43.08584,0 52.1335,0 17.20228,0 21.66213,-12.10665 21.66213,-20.96304 0,-13.18289 0,-43.65562 0,-43.65562 l -21.18664,0 0,43.00637 -41.89781,0" style="fill:#ed2328;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <g transform="matrix(0,-1.3469799,-1.3469799,0,929.0102,1681.8288)">
                            <g>
                                <g>
                                    <path d="m 774.088,545.088 c 0.528,-1.105 4.628,-5.89 6.303,-6.778 l 3.002,0 0,6.337 c 0,0 0.437,-0.137 1.021,-0.505 l -0.038,3.7 c -2.115,1.985 -3.199,3.419 -4.675,6.119 l -3.692,-1.159 c 0.298,-0.606 0.666,-1.315 0.942,-1.813 -0.538,-0.437 -1.252,-0.865 -1.877,-1.078 -1.186,2.141 -2.039,4.089 -2.553,5.657 l -3.852,-1.077 c 0.242,-0.864 0.675,-1.778 1.06,-2.317 l -6.5,1.023 0.015,-3.36 0.548,-0.246 -0.082,-6.094 -0.481,-0.054 0,-3.182 10.859,-2.008 0,6.835 z m 5.178,2.741 c 0.212,-0.215 0.438,-0.432 0.68,-0.647 l 0,-3.803 c -0.805,0.304 -2.172,1.713 -2.708,2.645 0.694,0.414 1.64,1.191 2.028,1.805 z m -11.679,-5.195 0,6.468 2.581,-0.307 0,-6.507 -2.581,0.346" style="fill:url(#linearGradient6984);stroke:none"/>
                                </g>
                            </g>
                        </g>
                        <g transform="matrix(0,-1.3469799,-1.3469799,0,929.0102,1681.8288)">
                            <g>
                                <g>
                                    <path d="m 775.282,521.633 c 0.459,-1.037 2.312,-1.107 3.243,-1.402 0.236,0.562 0.497,0.861 0.717,1.033 l -0.012,-0.888 4.815,-0.281 0,11.444 -2.585,0.35 0,0.733 3.289,-0.517 0,2.916 -3.513,0.554 0,0.952 -3.868,0.52 0.017,-0.989 -3.419,0.593 c 0,0 -0.225,0.396 -0.385,1.151 l -3.804,0.143 c -0.015,-0.288 0.192,-0.755 0.192,-0.755 l -1.878,0.361 c -0.303,0.062 -0.508,0.522 -0.577,1.094 l -4.285,0.055 c 0,0 -0.56,-3.592 1.493,-3.988 l 1.429,-0.2 -3.034,-0.95 c 1.123,-1.475 2.504,-2.874 3.435,-3.952 l -3.274,0.323 0,-3.018 3.113,-0.396 c -0.802,-0.539 -2.247,-1.939 -2.727,-2.802 l 3.175,-1.833 c 1.099,1.315 2.702,2.762 3.757,3.091 l 0,-3.629 3.668,-0.466 -0.057,4.615 1.053,-0.074 c -0.024,-1.038 0.022,-3.788 0.022,-3.788 z m 5.135,1.51 -1.154,-0.324 -0.006,-0.346 c -1.239,0.226 -1.118,0.858 -1.055,0.921 0.067,0.134 0.302,0.18 0.579,0.142 l 1.604,0.109 0.032,-0.502 z m -1.187,6.934 c 0,0 0.643,-0.647 1.155,-1.044 -0.739,0 -2.54,0.966 -2.453,2.888 l 1.27,-0.07 0.028,-1.774 z m -1.894,2.964 0.048,-1.059 -3.12,-0.993 0,1.327 1.31,0.151 c 0,0 -0.355,0.448 -0.419,0.843 l 2.181,-0.269 z m -10.497,0.989 c -0.124,0.174 -0.079,0.269 -0.021,0.388 l 4.174,-0.583 c 0.102,-0.27 0.243,-0.556 0.429,-0.883 l -0.825,0.089 0,-2.82 c -1.443,0.79 -3.145,2.944 -3.757,3.809 z m 7.425,-3.126 c 0.406,-0.693 0.93,-1.576 1.644,-2.338 l -1.644,0.058 0,2.28 z m 1.677,-2.375 c 0.302,-0.318 0.634,-0.613 1.01,-0.861 0.577,-0.41 2.086,-1.041 3.484,-1.147 l 0,-0.504 -4.478,0.393 c -0.006,0.003 -0.01,0.003 -0.016,0.003 l 0,2.116" style="fill:url(#linearGradient7002);stroke:none"/>
                                </g>
                            </g>
                        </g>
                        <g transform="matrix(0,-1.3469799,-1.3469799,0,929.0102,1681.8288)">
                            <g>
                                <g>
                                    <path d="m 780.922,501.674 2.902,-0.408 0.012,4.611 0.877,-0.156 0,3.616 -4.585,0.798 0,3.396 -12.854,2.102 -0.01,-2.28 c -0.475,1.047 -0.809,2.185 -1.214,3.286 l 12.537,-1.707 c 1.802,-0.995 5.537,-1.887 6.116,-1.724 l 0.048,3.125 c -4.767,1.186 -5.249,1.749 -8.041,3.879 l -5.585,-0.107 c 0.097,-0.267 0.675,-1.076 1.252,-1.399 l -9.226,1.237 0,-2.909 2.734,-0.373 -2.703,-1.406 c 0.336,-1.617 1.173,-3.682 2.358,-5.12 l 1.715,0.995 -0.011,-2.778 -1.679,1.278 c -1.276,-1.489 -2.047,-2.89 -2.481,-4.775 l 2.842,-1.942 c 0.723,2.094 0.929,2.823 1.31,3.747 l -0.011,-2.777 12.903,-1.994 0,4.469 0.794,-0.091 0,-4.593 z m -10.868,5.357 0,4.312 1.047,-0.148 0,-4.312 -1.047,0.148 z m 3.023,-0.427 0,4.31 1.081,-0.153 0,-4.312 -1.081,0.155 z m 4.128,-0.587 -1.072,0.152 0,4.311 1.072,-0.153 0,-4.31" style="fill:url(#linearGradient7020);stroke:none"/>
                                </g>
                            </g>
                        </g>
                        <path d="m 188.29384,613.81246 c 0.70986,0 1.71875,0.005 2.01373,0.24919 0.70447,0.57786 0.61288,1.15706 0.61288,2.26428 0,1.03852 -0.0511,1.875 -0.71524,2.5404 -0.19262,0.19128 -1.1611,0.12123 -1.91137,0.12123 l -2.13092,0 0,-5.1751 2.13092,0 z m -3.82139,6.51669 3.5493,0 c 1.22171,0 2.44208,0.13335 3.191,-0.4701 0.9092,-0.70446 1.23787,-2.03393 1.23787,-3.30817 0,-1.37527 -0.21148,-2.98356 -1.08028,-3.65571 -0.82704,-0.63847 -2.16729,-0.46201 -3.34859,-0.46201 l -3.5493,0 0,7.89599" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 226.28406,612.43181 6.69449,0 0,1.316 -2.64412,0 0,6.59885 -1.42242,0 0,-6.59885 -2.62795,0 0,-1.316" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 201.45922,612.43181 6.69314,0 0,1.316 -2.64547,0 0,6.59885 -1.42241,0 0,-6.59885 -2.62526,0 0,-1.316" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 237.54886,612.40083 1.56114,0 2.44343,6.16917 2.39223,-6.18669 1.52478,0 -2.97952,7.87984 -1.96255,0 -2.97951,-7.86232" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 246.64366,612.38467 6.64196,0 0,1.33081 -5.20608,0 0,1.94908 5.16163,0 0,1.34563 -5.16163,0 0,1.96928 5.20877,0 0,1.31062 -6.64465,0 0,-7.90542" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 209.85898,612.38467 6.64466,0 0,1.33081 -5.20608,0 0,1.94908 5.16163,0 0,1.34563 -5.16163,0 0,1.96928 5.20877,0 0,1.31062 -6.64735,0 0,-7.90542" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 193.79221,612.38467 6.64331,0 0,1.33081 -5.20608,0 0,1.94908 5.16298,0 0,1.34563 -5.16298,0 0,1.96928 5.21012,0 0,1.31062 -6.64735,0 0,-7.90542" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 284.11125,607.22169 3.88065,0 5.92267,10.57379 0,-10.57379 2.88524,0 0,13.65164 -4.47332,0 -5.22359,-9.55682 -0.035,9.55682 -2.95663,0 0,-13.65164" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 312.49751,607.22169 3.8793,0 5.92132,10.57379 0,-10.57379 2.88658,0 0,13.65164 -4.47063,0 -5.22763,-9.55682 -0.035,9.55682 -2.95393,0 0,-13.65164" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 306.24482,615.83698 -3.13711,0 1.50862,-4.3494 1.62849,4.3494 z m -4.95149,5.07676 0.85533,-2.63874 4.90032,0 0.96174,2.63874 3.04821,0 -4.76157,-13.70552 -3.35936,0 -4.76563,13.70552 3.12096,0" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 278.06601,607.24728 -3.54929,0 c -2.23599,0 -4.64708,1.82921 -4.64708,4.06788 l 0,5.46066 c 0,2.23598 2.41109,4.06384 4.64708,4.06384 l 3.54929,0 c 2.23464,0 4.64573,-1.82786 4.64573,-4.06384 l 0,-5.46066 c 0,-2.23867 -2.41109,-4.06788 -4.64573,-4.06788 z m -1.77262,10.70984 c -3.67457,0 -3.7271,-0.24919 -3.7271,-3.9251 0,-3.67052 0.33136,-3.90085 3.7271,-3.90085 3.30952,0 3.72305,0.33674 3.72305,3.90085 0,3.25835 -0.21283,3.9251 -3.72305,3.9251" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 261.65036,617.95712 c -3.67456,0 -3.72979,-0.24919 -3.72979,-3.9251 0,-3.67052 0.33271,-3.90085 3.72979,-3.90085 2.56061,0 3.38362,0.21012 3.63146,1.95312 l 2.69127,0 0,-0.76913 c 0,-2.23867 -2.15112,-3.95338 -4.42618,-4.06788 l -3.13173,0 c -2.2764,0 -5.18587,0.97118 -5.18587,4.06788 0,0 -0.0821,1.76724 -0.0821,2.68858 0,0.91863 0.0821,2.77208 0.0821,2.77208 0,2.82057 2.78016,4.06384 4.85047,4.06384 l 3.5951,0 c 2.02316,-0.0269 3.92105,-1.12473 4.12849,-3.10613 0.0862,-0.96984 0.0862,-1.98276 0.0862,-1.98276 l -2.70069,0 c -0.1778,1.78474 -0.76374,2.20635 -3.53852,2.20635" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 221.58848,618.90674 c -2.13765,0 -2.22116,-0.14817 -2.22116,-2.43803 0,-2.28044 0.093,-2.53637 2.16459,-2.53637 1.89117,0 2.14844,0.1549 2.31142,1.39682 l 1.54094,0 c -0.0215,-2.61448 -1.93291,-2.99702 -2.91755,-3.04956 l -1.82247,0 c -1.32408,0 -2.90947,1.22575 -2.90947,3.15193 l 0,2.23869 c 0,1.75646 1.71605,2.76938 2.9216,2.76938 l 2.09185,0 c 1.17996,-0.0188 2.61449,-0.58997 2.61449,-2.962 l -1.49245,0 c -0.17915,1.21093 -0.36368,1.42914 -2.28179,1.42914" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 234.63534,620.32107 0,-7.92293 1.4938,0 0,7.92293 -1.4938,0 z" style="fill:#231f20;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                        <path d="m 451.56914,638.65885 c 0,11.7066 -9.48812,21.19877 -21.20012,21.19877 -11.70121,0 -21.19337,-9.49217 -21.19337,-21.19877 0,-11.70525 9.49216,-21.19472 21.19337,-21.19472 11.712,0 21.20012,9.48947 21.20012,21.19472" style="fill:#ed2328;fill-opacity:1;fill-rule:nonzero;stroke:none"/>
                    </g>
                </svg>
            </div>
            
            <div class="landing-text">
                <h1 class="landing-title">ONE TRUTH PREVAILS</h1>
                
                <div class="landing-story">
                    <p class="story-intro">
                        <strong>CLASSIFIED: Metropolitan Police Database Division</strong>
                    </p>
                    <p>
                        Something strange is happening in Beika City. A series of seemingly unrelated incidents—a missing receipt at the Mouri Detective Agency, 
                        a sugar jar swap at Cafe Poirot, a scratched locker at Teitan Elementary, an umbrella mix-up at Beika Station—all share a common thread: 
                        a mysterious calling card marked with a <strong>BLACK_STAR</strong> signature.
                    </p>
                    <p>
                        <strong>You have been recruited as a Database Analyst Specialist</strong> to work alongside Conan Edogawa and the investigation team. 
                        While the detectives piece together clues on the ground, <strong>your expertise in SQL database queries is essential</strong> for uncovering 
                        patterns, cross-referencing evidence, and connecting clues that could expose this copycat criminal's operations.
                    </p>
                    <p>
                        The team needs someone who can quickly query case files, analyze evidence relationships, identify key suspects, and extract critical 
                        information from the growing database. Clues like "B7" and "03:10" keep appearing—<strong>your SQL skills are the key to solving these mysteries.</strong>
                    </p>
                </div>
                
                <div class="landing-goals">
                    <h2 class="goals-title">YOUR MISSION</h2>
                    <ul class="goals-list">
                        <li><strong>Case 1-2:</strong> Find the mysterious code "B7" and trace it across case files</li>
                        <li><strong>Case 3-4:</strong> Identify the BLACK_STAR signature pattern and prioritize by severity</li>
                        <li><strong>Case 5-6:</strong> Analyze evidence and connect time-based clues (03:10)</li>
                        <li><strong>Case 7-8:</strong> Count evidence patterns and identify top suspects</li>
                        <li><strong>Case 9-10:</strong> JOIN multiple tables to build the final reveal</li>
                        <li><strong>Master SQL:</strong> Progress from simple SELECT to complex multi-table JOINs</li>
                    </ul>
                </div>
                
                <div class="landing-instructions">
                    <h2 class="instructions-title">HOW TO PLAY</h2>
                    <ol class="instructions-list">
                        <li><strong>Read the Case File</strong> - Each case provides a Detective Conan story and specific SQL task</li>
                        <li><strong>Examine the Database</strong> - Open folders in the filing cabinet to see available tables and columns</li>
                        <li><strong>Build Your Query</strong> - Drag columns from the database files into the visual query builder</li>
                        <li><strong>Add Conditions</strong> - Use WHERE clauses with AND/OR logic to filter results</li>
                        <li><strong>Execute & Analyze</strong> - Run queries to find evidence and solve cases</li>
                        <li><strong>Pin Your Findings</strong> - Successful queries are saved to your evidence board</li>
                        <li><strong>Progress Through Cases</strong> - Each case builds on the previous one, unlocking new tables and complexity</li>
                    </ol>
                </div>
                
                <button id="start-game-btn" class="btn-pixel btn-primary large-btn landing-start-btn">
                    <span class="pixel-text-medium">BEGIN INVESTIGATION</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- Main Game (hidden initially) -->
    <div id="main-game" class="detective-office" style="display: none;">
        <!-- Office Background -->
        <div class="office-bg"></div>
        
        <!-- Detective Hat -->
        <div class="detective-character-container">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72.633881 91.445908" class="detective-character-img" width="120" height="150">
                <g transform="translate(-5.6484076,-2.1512394e-2)">
                    <path d="M 19.868859,90.773072 C 19.868859,89.43843 18.942753,89.076905 15.523847,89.076905 C 11.092797,89.076905 9.8551028,88.22578 7.0713239,83.264357 C 6.3576789,81.992456 7.1003827,80.188739 7.4469667,79.096747 C 7.7935517,78.004755 7.5231697,76.443837 6.8461177,75.628039 C 5.8470977,74.424293 4.9298409,73.739816 6.4704749,72.557366 C 7.5145859,71.756001 9.7188598,70.703985 11.36886,70.219553 C 14.884412,69.187405 16.852607,70.896291 16.895468,75.018035 L 16.922078,77.576905 L 18.580976,74.902897 C 19.49337,73.432193 21.339548,71.727844 22.683593,71.115456 C 25.723901,69.730199 26.802186,70.507036 23.954505,72.031068 C 20.73385,73.754711 21.01154,80.365254 24.368859,81.894951 C 27.743721,83.432641 27.517737,85.055655 23.368859,89.076905 C 20.74451,91.620524 19.868859,92.044881 19.868859,90.773072 z" fill="#010101"/>
                    <path d="M 49.934815,1.303781 C 49.739875,1.8776466 48.542095,2.3157218 47.979135,2.7379401 C 47.111215,3.3888793 46.861745,4.064901 46.023465,4.6936115 C 45.421995,5.1447122 45.100505,5.620011 44.719685,6.1277706 C 44.277995,6.7166899 43.975715,6.9560809 43.285525,7.3011735 C 42.400345,7.7437669 41.366165,7.991018 40.547585,8.6049544 C 39.865695,9.1163702 38.527595,9.0868332 37.809645,9.5176012 C 37.033635,9.9832082 36.148835,10.005007 35.462845,10.691004 C 34.859605,11.294237 33.710066,11.632581 32.985658,11.994785 C 32.16952,12.402854 31.726731,12.992955 31.160364,13.559322 C 30.619224,14.100463 30.440037,15.046433 29.856584,15.77575 C 29.415371,16.327265 28.965069,17.157078 28.683181,17.861799 C 28.596262,18.079096 28.509343,18.296393 28.422424,18.51369 C 28.041911,19.464973 27.593884,20.170771 27.118644,21.121251 C 26.803066,21.752407 26.666115,22.417443 26.336375,23.076923 C 26.029688,23.690298 26.020372,24.175195 25.554106,24.64146 C 25.021355,25.174212 23.690648,25.14453 22.946544,25.293351 C 22.192307,25.444198 21.240512,25.293351 20.469361,25.293351 C 19.699689,25.293351 18.639929,25.398481 17.861799,25.554107 C 16.95564,25.735339 16.029191,25.764175 15.123859,25.945241 C 14.440181,26.081977 13.840998,26.461523 13.298565,26.597132 C 12.900404,26.696672 12.202294,27.928448 12.125162,28.031291 C 6.8861978,41.479179 29.027554,36.28587 33.767926,34.680574 C 34.290158,34.680574 36.155605,37.081882 36.505865,37.548892 C 37.203905,38.479604 38.075305,39.033039 38.722295,39.895697 C 39.114815,40.419056 40.177285,41.275082 40.808345,41.590613 C 41.527355,41.950117 42.124155,42.835218 42.764015,43.15515 C 43.589505,43.567895 44.422335,43.546284 45.371575,43.546284 C 46.444975,43.546284 46.623145,42.685526 46.414605,41.851369 C 46.156695,40.819723 44.021995,40.103623 43.676665,38.722295 C 43.134895,36.555224 45.532655,38.530573 46.284225,38.852673 C 47.915295,39.551703 48.756925,41.067979 50.325945,41.460235 C 52.149985,41.916246 49.844665,40.196687 49.543675,39.895697 C 48.923685,39.275708 46.747415,36.404313 49.282915,37.418514 C 51.580785,38.337658 53.303795,40.192963 55.541065,40.938722 C 56.183035,41.152712 57.339785,40.938722 58.018255,40.938722 C 59.087135,40.938722 56.995845,39.324462 56.714475,39.113429 C 55.855155,38.468941 54.995115,37.690137 54.498045,37.027379 C 54.198225,36.627623 57.435955,36.756492 57.496735,36.766623 C 58.680075,36.963846 59.693995,37.539307 60.756195,38.070404 C 61.574415,38.479517 62.334845,39.145152 63.233375,39.504563 C 64.074945,39.84119 64.877795,40.214481 65.710565,40.547588 C 66.884475,41.017152 67.350375,42.227768 67.405475,42.503259 C 67.511705,43.03439 68.608755,44.388312 68.970015,45.110821 C 69.335375,45.841542 69.388455,46.537926 69.882655,47.196871 C 70.330975,47.794621 70.236725,48.613127 70.404175,49.28292 C 70.599945,50.066031 70.185045,51.072087 70.013035,51.760104 C 69.803125,52.599741 69.882655,53.496184 69.882655,54.367666 C 69.882655,55.265108 70.032225,55.746231 70.664925,56.062581 C 71.243335,56.351785 72.736545,56.323338 73.402865,56.323338 C 74.272055,56.323338 75.141245,56.323338 76.010425,56.323338 C 76.946445,56.323338 77.297825,56.356115 77.705345,55.541069 C 78.095815,54.760128 76.891205,53.412529 76.531945,52.933507 C 75.820745,51.985248 75.702155,51.333329 74.706645,50.586701 C 73.990945,50.049921 73.144245,49.609934 72.490225,49.28292 C 72.316545,49.19608 72.490225,46.512366 72.490225,46.284224 C 72.490225,45.403071 72.354695,44.469218 72.750975,43.676662 C 73.110525,42.957559 73.011735,41.785866 73.011735,40.808344 C 73.011735,39.367124 72.886815,38.097702 72.620595,36.766623 C 72.332885,35.328076 71.968705,33.944344 71.968705,32.464146 C 71.968705,31.46458 71.968705,30.465015 71.968705,29.46545 C 71.968705,28.509344 71.968705,27.553238 71.968705,26.597132 C 71.968705,25.641026 71.968705,24.684919 71.968705,23.728813 C 71.968705,22.734826 72.064925,21.63649 71.838335,20.730117 C 71.511635,19.423322 70.762445,18.334022 70.013035,17.209909 C 69.398145,16.287569 68.690475,15.576875 68.057365,14.732725 C 67.376985,13.825553 66.462585,13.193221 65.319425,12.907431 C 64.399835,12.677534 63.381665,12.227425 62.451105,11.994785 C 61.681245,11.80232 63.260315,10.481968 63.624515,10.299869 C 64.147045,10.038601 64.015645,9.0510552 64.015645,8.4745763 C 64.015645,7.6737533 63.766295,6.8024774 63.494135,6.2581487 C 63.208655,5.6871873 62.766795,4.9841449 62.451105,4.5632334 C 61.919245,3.8540863 62.088055,3.4690619 61.147325,2.9986963 C 60.519345,2.6847043 60.861525,4.4579027 60.365055,4.9543677 C 59.736605,5.5828235 59.055825,5.8952696 58.148635,6.2581487 C 57.187535,6.6425856 56.152385,6.8236984 55.280315,6.649283 C 54.687855,6.5307918 53.385085,4.7307503 53.063885,4.3024773 C 52.601015,3.6853185 52.083595,3.1918121 51.499345,2.607562 C 50.830305,1.9385237 50.252025,2.2554396 49.934815,1.303781 z" fill="#000000"/>
                    <path d="M 32.724905,35.59322 C 31.847805,35.72385 30.225135,36.528447 29.335075,37.418513 C 28.179284,38.5743 27.243996,39.900723 26.075619,41.0691 C 25.370219,41.7745 25.379539,43.723042 25.162972,44.589309 C 24.926651,45.534594 24.743495,46.527972 24.511082,47.457627 C 24.275597,48.399565 24.185941,49.344085 23.989569,50.325945 C 23.459296,52.977309 23.207301,49.852994 23.207301,48.500652 C 23.207301,47.008495 22.55541,45.712079 22.55541,44.198174 C 22.55541,43.249008 22.125653,46.054835 21.773142,46.936115 C 21.343162,48.011063 21.382007,49.299889 21.382007,50.456323 C 21.382007,52.335872 20.982335,51.065521 20.730117,49.804433 C 20.480852,48.558108 20.208604,47.175279 20.208604,45.89309 C 20.208604,44.91526 19.81747,44.167783 19.81747,43.15515 C 19.81747,41.097141 19.751841,42.786479 18.904823,44.198174 C 18.42739,44.993897 18.085733,45.909997 17.861799,46.805736 C 17.380984,48.728994 17.340286,43.560898 17.340286,41.590613 C 17.340286,40.82617 18.969062,37.941926 17.601043,40.677966 C 16.903241,42.07357 16.057278,43.494351 15.514993,44.850065 C 14.664198,46.977054 14.993481,43.033381 14.993481,41.851369 C 14.993481,41.021517 14.915096,40.364426 14.732724,39.634941 C 14.476879,38.61156 15.462594,37.353635 16.036505,36.636245 C 17.032305,35.391496 18.691546,34.012857 20.208604,33.507171 C 22.285093,32.815008 24.260411,32.333768 26.466753,32.333768 C 28.429502,32.333768 31.220915,31.646963 32.855275,32.464146 C 33.967565,33.020288 33.760835,35.386033 32.724905,35.59322 z" fill="#000000"/>
                    <path d="M 24.64146,46.023468 C 24.327468,46.651452 25.423729,47.277032 25.423729,47.97914 C 25.423729,48.109518 25.423729,48.239896 25.423729,48.370274" transform="translate(0.2607557,-1.5645371)" fill="none" stroke="#000000" stroke-width="1"/>
                    <path d="M 44.174231,0.85642821 C 43.886617,1.0228175 43.301758,1.4566037 43.052472,1.8567376 C 42.710826,2.4051206 42.491593,2.6759433 42.491593,3.3572014 C 42.491593,3.4905759 42.491593,3.6239505 42.491593,3.7573251 C 42.491593,3.8997692 42.616234,4.0240742 42.678552,4.1574488 C 42.835162,4.4926177 42.934905,4.763311 43.177111,4.9576964 C 43.465512,5.1891542 44.979894,5.0336216 45.358308,4.9576964 C 45.769915,4.8751118 45.829728,4.2792611 46.043829,4.1074335 C 46.221064,3.965191 46.242977,3.3082813 46.29311,3.1071241 C 46.40747,2.648211 46.211237,2.2598033 46.043829,1.8567376 C 45.916356,1.5498262 45.613732,1.3085397 45.295988,1.2065366 C 44.847072,1.0624232 44.639024,0.93103301 44.174231,0.85642821 z" fill="#000000"/>
                    <path d="M 22.446657,42.859945 L 33.881331,42.736724 L 34.823013,43.845715 L 36.03374,45.94048 L 35.899212,53.949872 L 34.688484,54.935644 L 33.208703,56.660742 L 23.119285,56.783964 L 21.101402,54.935644 L 20.294248,52.840879 L 20.159724,46.063702 L 20.428774,45.324373 L 21.370454,43.968938 L 22.446657,42.859945 z" fill="none" stroke="#000000" stroke-width="0.98750854"/>
                    <path d="M 45.181477,42.983167 L 56.616149,42.859945 L 57.557832,43.968938 L 58.768558,46.063702 L 58.634031,54.073093 L 57.423304,55.058866 L 55.943522,56.783964 L 45.854103,56.907185 L 43.836221,55.058866 L 43.029068,52.964101 L 42.894541,46.186923 L 43.163592,45.447594 L 44.105271,44.092159 L 45.181477,42.983167 z" fill="none" stroke="#000000" stroke-width="0.98750854"/>
                    <rect width="5.0948339" height="0.72363019" x="36.916729" y="46.995716" fill="none" stroke="#000000" stroke-width="1.05141973"/>
                    <path d="M 25.025332,59.913735 C 25.642226,59.399042 26.152506,60.611304 26.932821,60.936825 C 27.511269,61.17813 28.073748,61.355935 28.704069,61.618884 C 29.284523,61.86103 30.168014,62.612946 30.74781,63.096679 C 31.318983,63.57323 31.680627,63.761276 32.246554,64.233446 C 32.700861,64.612488 33.046497,65.084257 33.200304,65.597565 C 33.222333,65.671087 33.200304,65.749134 33.200304,65.824919 L 43.810139,64.146705 L 47.191684,61.789666 C 49.561072,61.604283 58.101671,59.840461 55.895245,60.231596 C 58.012548,59.887867 58.078544,60.727074 60.041438,60.141089 C 60.772386,60.141089 62.015512,58.794519 62.630181,58.43594 C 63.971603,57.653391 63.500899,57.482123 63.856419,57.185497 C 64.523757,56.628724 65.368541,55.280981 65.917246,54.823184 L 68.537084,56.513672 C 67.818163,56.513672 67.006246,57.724033 66.765846,57.991467 C 66.370311,58.431465 64.006336,60.459323 63.720174,60.936825 C 63.426781,61.426404 62.900242,61.847255 62.35768,62.073591 L 56.002129,65.597566 C 52.554589,66.803244 51.28478,67.205854 52.05089,66.961686 C 52.709699,66.751716 50.717744,67.371804 49.958978,67.530068 C 49.254385,67.677032 48.604615,67.954658 47.915239,68.09845 C 47.077268,68.273237 46.230425,68.346586 45.462755,68.666834 C 44.842006,68.925785 44.125666,69.116241 43.555255,69.235217 C 42.840307,69.384343 42.539609,69.501307 42.056511,69.803599 L 30.475307,70.14463 L 20.937851,63.892417 C 21.201768,63.457423 22.087419,62.364918 22.845343,61.732562 C 23.387262,61.280425 23.984857,61.226293 24.207835,60.482118 C 24.294165,60.194022 24.729409,60.242937 25.025332,59.913735 z" fill="#000000"/>
                    <path d="M 22.909458,57.589856 C 22.898118,56.933825 22.588539,57.32958 23.076424,57.60601 C 24.516059,58.421687 25.728781,60.009688 26.120327,60.982469 C 26.160836,61.08311 26.34295,61.004007 26.454259,61.014776" fill="none" stroke="#000000" stroke-width="0.88357645"/>
                    <path d="M 60.089619,59.970393 C 60.315349,59.438478 61.266602,58.491529 61.997225,57.943561 C 62.803801,57.338629 63.327527,56.418746 63.547156,55.320601 C 63.714455,54.484108 64.439799,53.776864 64.620185,53.055318 C 64.657999,52.904062 66.289341,55.267356 66.289341,56.035954 C 66.289341,56.934338 65.30517,57.349681 65.097087,58.182012 C 64.865336,59.109013 63.88576,59.870241 63.308705,60.447295 C 62.849907,60.906093 62.059242,61.117337 61.401098,61.281873 C 60.436273,61.523079 60.089619,60.714089 60.089619,59.970393 z" fill="#000000"/>
                    <path d="M 64.353424,41.995663 C 63.38757,42.120531 62.772704,43.451178 62.10822,44.315901 C 61.47065,45.145597 61.109886,46.264664 60.65544,47.151745 C 59.981638,48.46702 59.842888,49.937274 59.466805,51.405514 C 59.030333,53.109513 58.80645,54.939211 58.80645,56.6905 C 58.80645,57.847791 58.938521,58.90544 58.938521,60.041954 C 58.938521,60.127888 58.938521,60.213823 58.938521,60.299758" fill="none" stroke="#000000" stroke-width="0.65662241"/>
                    <path d="M 48.167075,37.556012 C 48.991932,38.399848 51.298701,38.644923 52.45919,39.225168 C 53.380356,39.68575 54.248029,39.762025 54.962925,40.298197 C 55.318534,40.564904 56.480076,40.409227 56.989757,40.536647 C 57.148724,40.576389 57.307691,40.616131 57.466659,40.655873 C 58.258901,40.853933 58.36257,41.24856 58.062786,41.848127 C 57.916433,42.140832 56.440395,41.967353 56.155179,41.967353 C 55.159284,41.967353 53.545206,41.170549 52.578416,40.894324 C 51.62305,40.621362 50.097469,40.298197 49.120878,40.298197 C 48.299925,40.298197 47.219602,39.348192 46.617144,38.986717 C 46.109484,38.682121 45.582092,38.07089 45.186439,37.675237" fill="#000000"/>
                </g>
            </svg>
        </div>
        
        <!-- Desk Surface -->
        <div class="desk-surface">
            <!-- Left: Case File (35%) -->
            <div class="case-file-section">
                <div class="case-file">
                    <div class="file-header">
                        <div class="file-tab"></div>
                        <h1 class="comic-text">DETECTIVE CONAN</h1>
                    </div>
                    <div class="file-content">
                        <h2 class="comic-text-medium" id="case-title">CASE FILE</h2>
                        <div id="case-story" class="comic-text-small">
                            <p>Loading case...</p>
                        </div>
                        <div class="case-task">
                            <h3 class="comic-text-small">TASK:</h3>
                            <p id="case-task-text" class="comic-text-tiny">Loading task...</p>
                        </div>
                        <div class="case-progress">
                            <h3 class="comic-text-small">PROGRESS:</h3>
                            <p class="comic-text-tiny">Case <span id="current-case-num">1</span> of <span id="total-cases">9</span></p>
                            <p class="comic-text-tiny">Tables Unlocked: <span id="unlocked-tables-count">1</span></p>
                        </div>
                       
                    </div>
                </div>
                
                <!-- Query Builder Button (Under Case File) -->
                <div class="query-builder-launcher">
                    <button id="open-query-builder-btn" class="btn-pixel btn-primary large-btn">
                        <span class="pixel-text-small">BUILD QUERY</span>
                    </button>
                </div>
            </div>

            <!-- Right: Evidence Board / Query Builder (65%) -->
            <div class="evidence-board-panel">
                <!-- Evidence Board View -->
                <div id="evidence-board-view" class="board-view active">
                    <div class="board-label pixel-text-small">EVIDENCE BOARD</div>
                    <div class="evidence-board-frame">
                        <div class="board-content">
                            <div id="evidence-pinboard" class="evidence-pinboard">
                                <div class="pinboard-placeholder pixel-text-small">
                                    Run successful queries to see them pinned here
                                </div>
                            </div>
                            <!-- Keep results container for current query display -->
                            <div id="results-container" class="results-container" style="display: none;">
                                <div class="results-placeholder pixel-text-small">
                                    Run a query to see results
                                </div>
                            </div>
                            <div id="query-info" class="query-info pixel-text-small"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Query Builder View -->
                <div id="query-builder-view" class="board-view">
                    <div class="board-label pixel-text-small" style="pointer-events: none;">
                        QUERY BUILDER
                        <button id="close-query-builder-btn" class="btn-pixel btn-secondary pixel-text-small" style="float: right; margin-top: -5px; pointer-events: auto;">CLOSE</button>
                    </div>
                    <div class="query-builder-frame">
                        <div class="query-builder-body">
                            <!-- Left: Database Files -->
                            <aside class="database-files" role="complementary" aria-label="Database schema">
                                <div class="files-header">
                                    <h3 class="pixel-text-small">DATABASE FILES</h3>
                                    <button id="inline-show-schema-btn" class="btn-pixel btn-secondary pixel-text-small" aria-label="View full database schema">SCHEMA</button>
                                </div>
                                <div id="inline-table-list" class="table-list" role="list" aria-label="Available database tables"></div>
                            </aside>
                            
                            <!-- Right: Query Builder and Results -->
                            <div class="computer-monitor" role="main">
                                <div class="monitor-frame">
                                    <div class="screen-content">
                                        <!-- Visual Builder Panel -->
                                        <div id="inline-visual-panel" role="tabpanel" class="query-builder active" aria-live="polite">
                                            <!-- Content will be copied from modal -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schema Modal -->
        <div id="schema-modal" class="modal">
            <div class="modal-content pixel-panel">
                <span class="close pixel-text">&times;</span>
                <h2 class="pixel-text-small">DATABASE SCHEMA</h2>
                <div id="schema-details"></div>
            </div>
        </div>

        <!-- Case File Modal -->
        <div id="case-modal" class="modal">
            <div class="modal-content pixel-panel fullscreen-modal">
                <span class="close pixel-text">&times;</span>
                <div class="detective-character-container">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72.633881 91.445908" class="detective-character-img" width="80" height="100">
                        <g transform="translate(-5.6484076,-2.1512394e-2)">
                            <path d="M 19.868859,90.773072 C 19.868859,89.43843 18.942753,89.076905 15.523847,89.076905 C 11.092797,89.076905 9.8551028,88.22578 7.0713239,83.264357 C 6.3576789,81.992456 7.1003827,80.188739 7.4469667,79.096747 C 7.7935517,78.004755 7.5231697,76.443837 6.8461177,75.628039 C 5.8470977,74.424293 4.9298409,73.739816 6.4704749,72.557366 C 7.5145859,71.756001 9.7188598,70.703985 11.36886,70.219553 C 14.884412,69.187405 16.852607,70.896291 16.895468,75.018035 L 16.922078,77.576905 L 18.580976,74.902897 C 19.49337,73.432193 21.339548,71.727844 22.683593,71.115456 C 25.723901,69.730199 26.802186,70.507036 23.954505,72.031068 C 20.73385,73.754711 21.01154,80.365254 24.368859,81.894951 C 27.743721,83.432641 27.517737,85.055655 23.368859,89.076905 C 20.74451,91.620524 19.868859,92.044881 19.868859,90.773072 z" fill="#010101"/>
                            <path d="M 49.934815,1.303781 C 49.739875,1.8776466 48.542095,2.3157218 47.979135,2.7379401 C 47.111215,3.3888793 46.861745,4.064901 46.023465,4.6936115 C 45.421995,5.1447122 45.100505,5.620011 44.719685,6.1277706 C 44.277995,6.7166899 43.975715,6.9560809 43.285525,7.3011735 C 42.400345,7.7437669 41.366165,7.991018 40.547585,8.6049544 C 39.865695,9.1163702 38.527595,9.0868332 37.809645,9.5176012 C 37.033635,9.9832082 36.148835,10.005007 35.462845,10.691004 C 34.859605,11.294237 33.710066,11.632581 32.985658,11.994785 C 32.16952,12.402854 31.726731,12.992955 31.160364,13.559322 C 30.619224,14.100463 30.440037,15.046433 29.856584,15.77575 C 29.415371,16.327265 28.965069,17.157078 28.683181,17.861799 C 28.596262,18.079096 28.509343,18.296393 28.422424,18.51369 C 28.041911,19.464973 27.593884,20.170771 27.118644,21.121251 C 26.803066,21.752407 26.666115,22.417443 26.336375,23.076923 C 26.029688,23.690298 26.020372,24.175195 25.554106,24.64146 C 25.021355,25.174212 23.690648,25.14453 22.946544,25.293351 C 22.192307,25.444198 21.240512,25.293351 20.469361,25.293351 C 19.699689,25.293351 18.639929,25.398481 17.861799,25.554107 C 16.95564,25.735339 16.029191,25.764175 15.123859,25.945241 C 14.440181,26.081977 13.840998,26.461523 13.298565,26.597132 C 12.900404,26.696672 12.202294,27.928448 12.125162,28.031291 C 6.8861978,41.479179 29.027554,36.28587 33.767926,34.680574 C 34.290158,34.680574 36.155605,37.081882 36.505865,37.548892 C 37.203905,38.479604 38.075305,39.033039 38.722295,39.895697 C 39.114815,40.419056 40.177285,41.275082 40.808345,41.590613 C 41.527355,41.950117 42.124155,42.835218 42.764015,43.15515 C 43.589505,43.567895 44.422335,43.546284 45.371575,43.546284 C 46.444975,43.546284 46.623145,42.685526 46.414605,41.851369 C 46.156695,40.819723 44.021995,40.103623 43.676665,38.722295 C 43.134895,36.555224 45.532655,38.530573 46.284225,38.852673 C 47.915295,39.551703 48.756925,41.067979 50.325945,41.460235 C 52.149985,41.916246 49.844665,40.196687 49.543675,39.895697 C 48.923685,39.275708 46.747415,36.404313 49.282915,37.418514 C 51.580785,38.337658 53.303795,40.192963 55.541065,40.938722 C 56.183035,41.152712 57.339785,40.938722 58.018255,40.938722 C 59.087135,40.938722 56.995845,39.324462 56.714475,39.113429 C 55.855155,38.468941 54.995115,37.690137 54.498045,37.027379 C 54.198225,36.627623 57.435955,36.756492 57.496735,36.766623 C 58.680075,36.963846 59.693995,37.539307 60.756195,38.070404 C 61.574415,38.479517 62.334845,39.145152 63.233375,39.504563 C 64.074945,39.84119 64.877795,40.214481 65.710565,40.547588 C 66.884475,41.017152 67.350375,42.227768 67.405475,42.503259 C 67.511705,43.03439 68.608755,44.388312 68.970015,45.110821 C 69.335375,45.841542 69.388455,46.537926 69.882655,47.196871 C 70.330975,47.794621 70.236725,48.613127 70.404175,49.28292 C 70.599945,50.066031 70.185045,51.072087 70.013035,51.760104 C 69.803125,52.599741 69.882655,53.496184 69.882655,54.367666 C 69.882655,55.265108 70.032225,55.746231 70.664925,56.062581 C 71.243335,56.351785 72.736545,56.323338 73.402865,56.323338 C 74.272055,56.323338 75.141245,56.323338 76.010425,56.323338 C 76.946445,56.323338 77.297825,56.356115 77.705345,55.541069 C 78.095815,54.760128 76.891205,53.412529 76.531945,52.933507 C 75.820745,51.985248 75.702155,51.333329 74.706645,50.586701 C 73.990945,50.049921 73.144245,49.609934 72.490225,49.28292 C 72.316545,49.19608 72.490225,46.512366 72.490225,46.284224 C 72.490225,45.403071 72.354695,44.469218 72.750975,43.676662 C 73.110525,42.957559 73.011735,41.785866 73.011735,40.808344 C 73.011735,39.367124 72.886815,38.097702 72.620595,36.766623 C 72.332885,35.328076 71.968705,33.944344 71.968705,32.464146 C 71.968705,31.46458 71.968705,30.465015 71.968705,29.46545 C 71.968705,28.509344 71.968705,27.553238 71.968705,26.597132 C 71.968705,25.641026 71.968705,24.684919 71.968705,23.728813 C 71.968705,22.734826 72.064925,21.63649 71.838335,20.730117 C 71.511635,19.423322 70.762445,18.334022 70.013035,17.209909 C 69.398145,16.287569 68.690475,15.576875 68.057365,14.732725 C 67.376985,13.825553 66.462585,13.193221 65.319425,12.907431 C 64.399835,12.677534 63.381665,12.227425 62.451105,11.994785 C 61.681245,11.80232 63.260315,10.481968 63.624515,10.299869 C 64.147045,10.038601 64.015645,9.0510552 64.015645,8.4745763 C 64.015645,7.6737533 63.766295,6.8024774 63.494135,6.2581487 C 63.208655,5.6871873 62.766795,4.9841449 62.451105,4.5632334 C 61.919245,3.8540863 62.088055,3.4690619 61.147325,2.9986963 C 60.519345,2.6847043 60.861525,4.4579027 60.365055,4.9543677 C 59.736605,5.5828235 59.055825,5.8952696 58.148635,6.2581487 C 57.187535,6.6425856 56.152385,6.8236984 55.280315,6.649283 C 54.687855,6.5307918 53.385085,4.7307503 53.063885,4.3024773 C 52.601015,3.6853185 52.083595,3.1918121 51.499345,2.607562 C 50.830305,1.9385237 50.252025,2.2554396 49.934815,1.303781 z" fill="#000000"/>
                            <path d="M 32.724905,35.59322 C 31.847805,35.72385 30.225135,36.528447 29.335075,37.418513 C 28.179284,38.5743 27.243996,39.900723 26.075619,41.0691 C 25.370219,41.7745 25.379539,43.723042 25.162972,44.589309 C 24.926651,45.534594 24.743495,46.527972 24.511082,47.457627 C 24.275597,48.399565 24.185941,49.344085 23.989569,50.325945 C 23.459296,52.977309 23.207301,49.852994 23.207301,48.500652 C 23.207301,47.008495 22.55541,45.712079 22.55541,44.198174 C 22.55541,43.249008 22.125653,46.054835 21.773142,46.936115 C 21.343162,48.011063 21.382007,49.299889 21.382007,50.456323 C 21.382007,52.335872 20.982335,51.065521 20.730117,49.804433 C 20.480852,48.558108 20.208604,47.175279 20.208604,45.89309 C 20.208604,44.91526 19.81747,44.167783 19.81747,43.15515 C 19.81747,41.097141 19.751841,42.786479 18.904823,44.198174 C 18.42739,44.993897 18.085733,45.909997 17.861799,46.805736 C 17.380984,48.728994 17.340286,43.560898 17.340286,41.590613 C 17.340286,40.82617 18.969062,37.941926 17.601043,40.677966 C 16.903241,42.07357 16.057278,43.494351 15.514993,44.850065 C 14.664198,46.977054 14.993481,43.033381 14.993481,41.851369 C 14.993481,41.021517 14.915096,40.364426 14.732724,39.634941 C 14.476879,38.61156 15.462594,37.353635 16.036505,36.636245 C 17.032305,35.391496 18.691546,34.012857 20.208604,33.507171 C 22.285093,32.815008 24.260411,32.333768 26.466753,32.333768 C 28.429502,32.333768 31.220915,31.646963 32.855275,32.464146 C 33.967565,33.020288 33.760835,35.386033 32.724905,35.59322 z" fill="#000000"/>
                            <path d="M 24.64146,46.023468 C 24.327468,46.651452 25.423729,47.277032 25.423729,47.97914 C 25.423729,48.109518 25.423729,48.239896 25.423729,48.370274" transform="translate(0.2607557,-1.5645371)" fill="none" stroke="#000000" stroke-width="1"/>
                            <path d="M 44.174231,0.85642821 C 43.886617,1.0228175 43.301758,1.4566037 43.052472,1.8567376 C 42.710826,2.4051206 42.491593,2.6759433 42.491593,3.3572014 C 42.491593,3.4905759 42.491593,3.6239505 42.491593,3.7573251 C 42.491593,3.8997692 42.616234,4.0240742 42.678552,4.1574488 C 42.835162,4.4926177 42.934905,4.763311 43.177111,4.9576964 C 43.465512,5.1891542 44.979894,5.0336216 45.358308,4.9576964 C 45.769915,4.8751118 45.829728,4.2792611 46.043829,4.1074335 C 46.221064,3.965191 46.242977,3.3082813 46.29311,3.1071241 C 46.40747,2.648211 46.211237,2.2598033 46.043829,1.8567376 C 45.916356,1.5498262 45.613732,1.3085397 45.295988,1.2065366 C 44.847072,1.0624232 44.639024,0.93103301 44.174231,0.85642821 z" fill="#000000"/>
                            <path d="M 22.446657,42.859945 L 33.881331,42.736724 L 34.823013,43.845715 L 36.03374,45.94048 L 35.899212,53.949872 L 34.688484,54.935644 L 33.208703,56.660742 L 23.119285,56.783964 L 21.101402,54.935644 L 20.294248,52.840879 L 20.159724,46.063702 L 20.428774,45.324373 L 21.370454,43.968938 L 22.446657,42.859945 z" fill="none" stroke="#000000" stroke-width="0.98750854"/>
                            <path d="M 45.181477,42.983167 L 56.616149,42.859945 L 57.557832,43.968938 L 58.768558,46.063702 L 58.634031,54.073093 L 57.423304,55.058866 L 55.943522,56.783964 L 45.854103,56.907185 L 43.836221,55.058866 L 43.029068,52.964101 L 42.894541,46.186923 L 43.163592,45.447594 L 44.105271,44.092159 L 45.181477,42.983167 z" fill="none" stroke="#000000" stroke-width="0.98750854"/>
                            <rect width="5.0948339" height="0.72363019" x="36.916729" y="46.995716" fill="none" stroke="#000000" stroke-width="1.05141973"/>
                            <path d="M 25.025332,59.913735 C 25.642226,59.399042 26.152506,60.611304 26.932821,60.936825 C 27.511269,61.17813 28.073748,61.355935 28.704069,61.618884 C 29.284523,61.86103 30.168014,62.612946 30.74781,63.096679 C 31.318983,63.57323 31.680627,63.761276 32.246554,64.233446 C 32.700861,64.612488 33.046497,65.084257 33.200304,65.597565 C 33.222333,65.671087 33.200304,65.749134 33.200304,65.824919 L 43.810139,64.146705 L 47.191684,61.789666 C 49.561072,61.604283 58.101671,59.840461 55.895245,60.231596 C 58.012548,59.887867 58.078544,60.727074 60.041438,60.141089 C 60.772386,60.141089 62.015512,58.794519 62.630181,58.43594 C 63.971603,57.653391 63.500899,57.482123 63.856419,57.185497 C 64.523757,56.628724 65.368541,55.280981 65.917246,54.823184 L 68.537084,56.513672 C 67.818163,56.513672 67.006246,57.724033 66.765846,57.991467 C 66.370311,58.431465 64.006336,60.459323 63.720174,60.936825 C 63.426781,61.426404 62.900242,61.847255 62.35768,62.073591 L 56.002129,65.597566 C 52.554589,66.803244 51.28478,67.205854 52.05089,66.961686 C 52.709699,66.751716 50.717744,67.371804 49.958978,67.530068 C 49.254385,67.677032 48.604615,67.954658 47.915239,68.09845 C 47.077268,68.273237 46.230425,68.346586 45.462755,68.666834 C 44.842006,68.925785 44.125666,69.116241 43.555255,69.235217 C 42.840307,69.384343 42.539609,69.501307 42.056511,69.803599 L 30.475307,70.14463 L 20.937851,63.892417 C 21.201768,63.457423 22.087419,62.364918 22.845343,61.732562 C 23.387262,61.280425 23.984857,61.226293 24.207835,60.482118 C 24.294165,60.194022 24.729409,60.242937 25.025332,59.913735 z" fill="#000000"/>
                            <path d="M 22.909458,57.589856 C 22.898118,56.933825 22.588539,57.32958 23.076424,57.60601 C 24.516059,58.421687 25.728781,60.009688 26.120327,60.982469 C 26.160836,61.08311 26.34295,61.004007 26.454259,61.014776" fill="none" stroke="#000000" stroke-width="0.88357645"/>
                            <path d="M 60.089619,59.970393 C 60.315349,59.438478 61.266602,58.491529 61.997225,57.943561 C 62.803801,57.338629 63.327527,56.418746 63.547156,55.320601 C 63.714455,54.484108 64.439799,53.776864 64.620185,53.055318 C 64.657999,52.904062 66.289341,55.267356 66.289341,56.035954 C 66.289341,56.934338 65.30517,57.349681 65.097087,58.182012 C 64.865336,59.109013 63.88576,59.870241 63.308705,60.447295 C 62.849907,60.906093 62.059242,61.117337 61.401098,61.281873 C 60.436273,61.523079 60.089619,60.714089 60.089619,59.970393 z" fill="#000000"/>
                            <path d="M 64.353424,41.995663 C 63.38757,42.120531 62.772704,43.451178 62.10822,44.315901 C 61.47065,45.145597 61.109886,46.264664 60.65544,47.151745 C 59.981638,48.46702 59.842888,49.937274 59.466805,51.405514 C 59.030333,53.109513 58.80645,54.939211 58.80645,56.6905 C 58.80645,57.847791 58.938521,58.90544 58.938521,60.041954 C 58.938521,60.127888 58.938521,60.213823 58.938521,60.299758" fill="none" stroke="#000000" stroke-width="0.65662241"/>
                            <path d="M 48.167075,37.556012 C 48.991932,38.399848 51.298701,38.644923 52.45919,39.225168 C 53.380356,39.68575 54.248029,39.762025 54.962925,40.298197 C 55.318534,40.564904 56.480076,40.409227 56.989757,40.536647 C 57.148724,40.576389 57.307691,40.616131 57.466659,40.655873 C 58.258901,40.853933 58.36257,41.24856 58.062786,41.848127 C 57.916433,42.140832 56.440395,41.967353 56.155179,41.967353 C 55.159284,41.967353 53.545206,41.170549 52.578416,40.894324 C 51.62305,40.621362 50.097469,40.298197 49.120878,40.298197 C 48.299925,40.298197 47.219602,39.348192 46.617144,38.986717 C 46.109484,38.682121 45.582092,38.07089 45.186439,37.675237" fill="#000000"/>
                        </g>
                    </svg>
                </div>
                <div class="modal-header">
                    <h1 class="pixel-text-large">SQL DETECTIVE</h1>
                    <h2 class="pixel-text-medium">THE CASE FILE</h2>
                </div>
                <div class="modal-body">
                    <div class="case-section">
                        <h3 id="case-title-full" class="comic-text-medium">CASE FILE</h3>
                        <div id="case-story-full" class="comic-text-small"></div>
                    </div>
                    <div class="case-section">
                        <h3 class="comic-text-small">TASK:</h3>
                        <p id="case-task-full" class="comic-text-tiny"></p>
                    </div>
                    <div class="case-section">
                        <h3 class="comic-text-small">PROGRESS:</h3>
                        <p class="comic-text-tiny">Case <span id="modal-current-case-num">1</span> of <span id="modal-total-cases">9</span></p>
                        <p class="comic-text-tiny">Tables Unlocked: <span id="modal-unlocked-tables-count">1</span></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Evidence Board Modal -->
        <div id="evidence-modal" class="modal">
            <div class="modal-content pixel-panel fullscreen-modal">
                <span class="close pixel-text">&times;</span>
                <div class="modal-header">
                    <h2 class="pixel-text-medium">EVIDENCE BOARD</h2>
                </div>
                <div class="modal-body">
                    <div id="evidence-pinboard-modal" class="evidence-pinboard"></div>
                </div>
            </div>
        </div>
        
        <!-- Query Detail Modal (for viewing individual queries) -->
        <div id="query-detail-modal" class="modal">
            <div class="modal-content pixel-panel fullscreen-modal">
                <span class="close pixel-text">&times;</span>
                <div class="modal-header">
                    <h2 class="pixel-text-medium" id="query-detail-title">QUERY DETAIL</h2>
                </div>
                <div class="modal-body">
                    <div class="query-detail-info">
                        <div class="query-detail-task pixel-text-small" id="query-detail-task"></div>
                        <div class="query-detail-sql pixel-text-small" id="query-detail-sql"></div>
                    </div>
                    <div id="query-detail-results" class="query-detail-results"></div>
                </div>
            </div>
        </div>

        <!-- Database Table Modal -->
        <div id="table-modal" class="modal">
            <div class="modal-content pixel-panel fullscreen-modal">
                <span class="close pixel-text">&times;</span>
                <div class="modal-header">
                    <h2 class="pixel-text-medium" id="table-modal-title">DATABASE TABLE</h2>
                </div>
                <div class="modal-body">
                    <div id="table-modal-content"></div>
                </div>
            </div>
        </div>

        <!-- Query Builder Modal -->
        <div id="query-builder-modal" class="modal query-builder-modal" role="dialog" aria-labelledby="qb-title" aria-modal="true" aria-describedby="qb-description">
            <div class="modal-content pixel-panel fullscreen-modal">
                <button class="close pixel-text" aria-label="Close query builder" type="button">&times;</button>
                <div class="detective-character-container">
                    <img src="img/detective-hat.svg" alt="Detective's hat" class="detective-character-img" />
                </div>
                <div class="modal-header">
                    <h2 id="qb-title" class="pixel-text-medium">QUERY BUILDER</h2>
                    <p id="qb-description" class="pixel-text-small sr-only">Build SQL queries using visual, guided, or SQL editor methods. All features are keyboard accessible.</p>
                </div>
                <div class="modal-body query-builder-body">
                    <!-- Left: Database Files -->
                    <aside class="database-files" role="complementary" aria-label="Database schema">
                        <div class="files-header">
                            <h3 class="pixel-text-small">DATABASE FILES</h3>
                            <button id="modal-show-schema-btn" class="btn-pixel btn-secondary pixel-text-small" aria-label="View full database schema">SCHEMA</button>
                        </div>
                        <div id="modal-table-list" class="table-list" role="list" aria-label="Available database tables"></div>
                    </aside>
                    
                    <!-- Right: Query Builder and Results -->
                    <div class="computer-monitor" role="main">
                        <div class="monitor-frame">
                            <div class="screen-content">
                                <!-- Visual Builder Panel -->
                                <div id="visual-panel" role="tabpanel" class="query-builder active" aria-live="polite">
                                    <div class="visual-builder-steps">
                                        <!-- Step 1: SELECT Columns -->
                                        <div class="builder-step active" data-step="1" aria-labelledby="step1-title">
                                            <h3 id="step1-title" class="pixel-text-small">STEP 1: SELECT COLUMNS</h3>
                                            <p class="pixel-text-small step-description">Drag columns from Database Files (left panel) to Selected Columns below</p>
                                            
                                            <div class="step-content">
                                                <fieldset class="selected-columns">
                                                    <legend class="pixel-text-small">Selected Columns</legend>
                                                    <div id="selected-columns-list" class="columns-list selected" role="group" aria-label="Selected columns" aria-live="polite">
                                                        <p class="pixel-text-small placeholder">No columns selected. Drag columns from Database Files (left panel) to add them.</p>
                                                    </div>
                                                </fieldset>
                                                
                                                <div class="step-actions">
                                                    <button type="button" class="btn-comic btn-clear pixel-text-small" id="clear-selection-btn" aria-label="Clear selection">CLEAR</button>
                                                    <button type="button" class="btn-comic btn-next pixel-text-small" id="next-to-conditions-btn" aria-label="Next step: add conditions">NEXT →</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Step 2: WHERE Conditions (Optional) -->
                                        <div class="builder-step" data-step="2" aria-labelledby="step2-title" hidden>
                                            <h3 id="step2-title" class="pixel-text-small">STEP 2: ADD CONDITIONS (Optional)</h3>
                                            <p class="pixel-text-small step-description">Filter your results with conditions. Drag columns from Database Files to use in conditions.</p>
                                            
                                            <div class="step-content">
                                                <div id="conditions-list" role="group" aria-label="Query conditions"></div>
                                                
                                                <div class="step-actions">
                                                    <button type="button" class="btn-comic btn-secondary pixel-text-small" id="add-condition-btn" aria-label="Add a new condition">ADD CONDITION</button>
                                                </div>
                                                
                                                <div class="step-actions">
                                                    <button type="button" class="btn-comic btn-back pixel-text-small" id="back-to-columns-btn" aria-label="Previous step: select columns">← BACK</button>
                                                    <button type="button" class="btn-comic btn-next pixel-text-small" id="next-to-review-btn" aria-label="Next step: review query">NEXT →</button>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Step 3: Review & Execute -->
                                        <div class="builder-step" data-step="3" aria-labelledby="step3-title" hidden>
                                            <h3 id="step3-title" class="pixel-text-small">STEP 3: REVIEW QUERY</h3>
                                            <p class="pixel-text-small step-description">Review your generated SQL query</p>
                                            
                                            <div class="step-content">
                                                <div class="generated-sql-container">
                                                    <label for="generated-sql" class="pixel-text-small">Generated SQL:</label>
                                                    <pre id="generated-sql" class="generated-sql" role="textbox" aria-readonly="true" aria-label="Generated SQL query"></pre>
                                                </div>
                                                
                                                <div class="step-actions">
                                                    <button type="button" class="btn-comic btn-secondary pixel-text-small" id="copy-sql-btn" aria-label="Copy SQL to clipboard">COPY SQL</button>
                                                    <button type="button" class="btn-comic btn-secondary pixel-text-small" id="edit-query-btn" aria-label="Edit query">EDIT</button>
                                                </div>
                                                
                                                <div class="step-actions">
                                                    <button type="button" class="btn-comic btn-back pixel-text-small" id="back-to-conditions-btn" aria-label="Previous step: add conditions">← BACK</button>
                                                    <button type="button" class="btn-comic btn-execute pixel-text-medium" id="execute-query-btn" aria-label="Execute query">EXECUTE QUERY</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load sql.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.10.3/sql-wasm.js"></script>
    <!-- Load Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Load Monaco Editor -->
    <script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js"></script>
    <script>
        // Configure Monaco Editor
        if (typeof require !== 'undefined') {
            require.config({ paths: { vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs' } });
        }
        
        // Ensure sql.js loads before our scripts
        if (typeof initSqlJs === 'undefined') {
            console.error('sql.js failed to load. Please check your internet connection.');
        }
    </script>
    <script src="js/database.js"></script>
    <script src="js/caseSystem.js"></script>
    <script src="js/queryHistory.js"></script>
    <script src="js/queryEditor.js"></script>
    <script src="js/queryBuilderAccessible.js"></script>
    <script src="js/gameLogic.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/visualizations.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
